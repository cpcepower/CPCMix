10 POKE &BDEE,&C9:KEY DEF 66,0,0,0,0:ON ERROR GOTO 1050
20 MODE 1:BORDER 0:INK 0,0:INK 1,24:INK 2,6:INK 3,14
30 MEMORY &7FFF:LOAD"si",&8000:LOAD"silipack.scr",&C000
40 '
50 'ENVELOPPES DES INSTRUMENTS
60 '
70 ENV 1,5,-2,3:ENT 1,21,8,1
80 ENV 2,4,-3,4:ENT-2,1,1,3,1,-1,3,1,0,3,1,1,3,1,-1,3
90 ENV 3,1,12,1,4,-3,2:ENT 3,1,15,1,1,-14,1
100 ENV 4,1,15,1,5,-1,2:ENT 4,15,1,1
110 ENV 5,12,-1,6
120 ENV 6,1,0,1,1,-10,1,1,0,1,1,10,1,1,0,2
130 ENV 7,15,1,1
140 ENV 8,5,3,1,9,-1,4
150 ENV 9,1,10,1,1,-10,1
160 '
170 'VARIANTES
180 '
190 ENV 10,2,-2,4,2,2,4,2,-2,4,2,2,4,2,-2,4
200 ENV 11,1,5,1,2,8,4,2,5,6,15,-1,1
210 ENV 12,8,-1,1,8,1,1
220 ENV 13,1,-6,1,1,-6,1,1,-6,1,1,-6,1,1,-6,1
230 ENV 14,1,-6,2,1,-8,1,1,-6,3,1,-6,5,1,-6,1
240 '
250 'TONALITES
260 '
270 ENT-7,1,9,5,1,-9,1
280 ENT 8,10,-2,1
290 ENT 9,10,2,1
300 ENT-10,5,-1,1,5,1,1
310 ENT-11,1,-7,1,1,6,1
320 ENT-12,1,7,1,1,-6,1
330 ENT-13,1,0,5,1,-10,1,1,0,5,1,10,1
340 ENT 14,1,20,1,10,-2,1
350 ENT 15,1,-20,1,10,2,1
360 '
370 GOSUB 1050:GOTO 520
380 '
390 SOUND canal%,1500,t%,15,1,1,0:RETURN'    Grosse caisse
400 SOUND canal%,880,t%,0,1,1,0:RETURN'    tom bass
410 SOUND canal%,740,t%,0,1,1,0:RETURN'    tom medium
420 SOUND canal%,540,t%,0,1,1,0:RETURN'    tom haut
430 SOUND canal%,0,t%,15,2,0,3:RETURN'    caisse claire
440 SOUND canal%,0,t%,13,6,0,7:RETURN'    Claquement de mains
450 SOUND canal%,0,t%,0,7,0,31:RETURN'    break
460 SOUND canal%,0,t%,0,8,2,1:RETURN'    charleston
470 SOUND canal%,0,t%,0,3,0,1:RETURN'    Balais
480 SOUND canal%,36,t%,0,9,3,0:RETURN'    Claves
490 SOUND canal%,22,t%,12,5,0,0:RETURN'    Triangle
500 SOUND canal%,44,t%,0,1,4,0:RETURN'    Whistle bas
510 SOUND canal%,34,t%,0,1,4,0:RETURN'    Whistle haut
520 RESTORE:FOR N=0 TO 9:READ vari(N):NEXT:FOR N=0 TO 9:READ tona(N):NEXT:DATA 0,1,3,6,7,10,11,12,13,14,0,7,8,9,10,11,12,13,14,15
530 tempo%=20
540 RESTORE 660:WHILE 1
550 READ Z$:IF z$="FIN"THEN 540
560 T%=33-TEMPO%:FOR ins%=1 TO 3:canal%=ins%:IF canal%=3 THEN canal%=4
570 ins$=MID$(z$,ins%,1)
580 IF ASC(ins$)>31+3 AND ASC(ins$)<45+3 THEN ON ASC(ins$)-31-3 GOSUB 390,400,410,420,430,440,450,460,470,480,490,500,510:GOTO 610
590 IF ASC(ins$)>44+3 AND ASC(ins$)<105+3 THEN SOUND canal%,note(ASC(ins$)-45-3),t%,13,vari(VAL(MID$(z$,4,1))),tona(VAL(RIGHT$(z$,1))),0:GOTO 610
600 IF ASC(ins$)=105+3 THEN SOUND canal%,0,t%,0,0
610 NEXT ins%:IF INKEY(8)=0 THEN tempo%=tempo%-1 ELSE IF INKEY(1)=0 THEN tempo%=tempo%+1
620 IF tempo%<0 THEN tempo%=0 ELSE IF tempo%>31 THEN tempo%=31
625 IK$=INKEY$:IF IK$<>""THEN 1200
630 WEND
640 '
650 '
660 DATA ")ll00","l)l00",")ll00","l)l00",")ll00","lll00",")ll00","l)l00",")ll00","lll00",")ll00","lll00","lll00","'ll00","lll00","lll00"
670 DATA "0ll70","0ll70","<ll70","<ll70","0ll70","<ll70","<ll70","<ll70","0ll70","0ll70","<ll70","<ll70","0ll70","<ll70","<ll70","0ll70"
680 DATA "<<l70","0<l70","0<l70","<<l70","<0l70","00l70","<0l70","<0l70","<<l70","00l70","0<l70","<0l70","<<l70","00l70","<<l70","00l70"
690 DATA "#0070","+0070","#<070","+<070","'0<70","#<<70","+<<70","+<<70","#0070","+0<70","#<070","#<<70","'0070","+<<70","+<070","+0<70"
700 DATA "#<070","+0070","+0070","#<070","'<<70","+0<70","#<<70","+<<70","#<070","+0<70","+0070","+<<70","'<070","+0<70","+<H70","+0<70"
710 DATA "#0070","+0070","#<070","+<070","'0<70","#<<70","+<H70","+<<70","#0070","+0H70","#<070","#<<70","'0070","+<<70","+<070","+0H70"
720 DATA "#<070","+0070","+0070","#<070","'<<70","+0<70","#<H70","+<<70","#<070","+0070","+0070","+<070","'<<70","+0070","'<H70","'0<70"
730 DATA "#0070","+0070","#<H70","+<070","'0<70","#<<70","+<H70","+<<70","#0H70","+0<70","#<070","#<<70","'0070","+<H70","+<H70","+0<70"
740 DATA "#<070","+0070","+0070","#<070","'<H70","+0<70","#<<70","+<<70","#<070","+0<70","+0H70","+<<70","'<H70","+0<70","+<H70","+0H70"
750 DATA "#0070","+0H70","#<070","+<H70","'0<70","#<H70","+<H70","+<H70","#0070","+0H70","#<070","#<H70","'0H70","+<<70","+<H70","+0H70"
760 DATA "#<070","+0H70","+0H70","#<070","'<<70","+0<70","#<H70","+<<70","#<H70","+0070","+0T70","+<070","'<<70","+0T70","'<T70","'0<70"
770 DATA "#0O70","+0O70","#<O70","+<H70","'0H70","#<Q70","+<Q70","+<H70","#0Y70","+0H70","#<Y70","#<X70","'0H70","+<X70","+<O70","+0O70"
780 DATA "#<H70","+0O70","+0H70","#<<70","'<070","+0070","#<Q70","+<Q70","#<H70","+0T70","+0T70","+<H70","'<070","+0070","+<X70","+0X70"
790 DATA "#0070","+0070","#<070","+<070","'0<70","#<<70","+<H70","+<<70","#0070","+0H70","#<070","#<<70","'0070","+<<70","+<070","+0H70"
800 DATA "#<070","+0070","+0070","#<070","'<<70","+0<70","#<H70","+<<70","#<070","+0070","+0070","+<070","'<<70","+0070","'<H70","'0<70"
810 DATA "#0O70","+0O70","#<O70","+<H70","'0H70","#<Q70","+<Q70","+<H70","#0Y70","+0H70","#<Y70","#<X70","'0H70","+<X70","+<O70","+0O70"
820 DATA "#<H70","+0O70","+0H70","#<<70","'<070","+0070","#<Q70","+<Q70","#<H70","+0T70","+0T70","+<H70","'<070","+0070","+<X70","+0X70"
830 DATA "#0070","+0070","#<070","+<070","'0<70","#<<70","+<H70","+<<70","#0070","+0H70","#<070","#<<70","'0070","+<<70","+<070","+0H70"
840 DATA "#<070","+0070","+0070","#<070","'<<70","+0<70","#<H70","+<<70","#<070","+0070","+0070","+<070","'<<70","+0070","'<H70","'0<70"
850 DATA "#0O70","+0O70","#<O70","+<H70","'0H70","#<Q70","+<Q70","+<H70","#0Y70","+0H70","#<Y70","#<X70","'0H70","+<X70","+<O70","+0O70"
860 DATA "#<H70","+0O70","+0H70","#<<70","'<070","+0070","#<<70","+<070","#<H70","+0<70","+0T70","+<T70","'<070","+0T70","+9Q70","+9Q70"
870 DATA "'9970","'9970","'E970","+E970","'9970","'E970","'E970","'E970","+9970","+9970","+E970","+E970","'9970","'E970","'E970","'9970"
880 DATA "+E970","+9970","+9970","+E970","'E970","+9970","+E970","+E970","+E970","+9970","+9970","+E970","'E970","+9970","'E970","'9970"
890 DATA "#0O70","+0O70","#<O70","+<H70","'0H70","#<Q70","+<Q70","+<H70","#0Y70","+0H70","#<Y70","#<X70","'0H70","+<X70","+<O70","+0O70"
900 DATA "#<H70","+0O70","+0H70","#<<70","'<070","+0070","#<Q70","+<Q70","#<H70","+0T70","+0T70","+<H70","'<070","+0070","+<X70","+0X70"
910 DATA "#0070","+0070","#<070","+<070","'0<70","#<<70","+<H70","+<<70","#0070","+0H70","#<070","#<<70","'0070","+<<70","+<070","+0H70"
920 DATA "#<070","+0070","+0070","#<070","'<<70","+0<70","#<H70","+<<70","#<070","+0070","+0070","+<070","'<<70","+0070","'<H70","'0<70"
930 DATA "#0O70","+0O70","#<O70","+<H70","'0H70","#<Q70","+<Q70","+<H70","#0Y70","+0H70","#<Y70","#<X70","'0H70","+<X70","+<O70","+0O70"
940 DATA "#<H70","+0O70","+0H70","#<<70","'<070","+0070","#<<70","+<070","#<H70","+0<70","+0T70","+<T70","'<070","+0T70","+9Q70","+9Q70"
950 DATA "'9970","'9970","'E970","+E970","'9970","'E970","'E970","'E970","+9970","+9970","+E970","+E970","'9970","'E970","'E970","'9970"
960 DATA "+E970","+9970","+9970","+E970","'E970","+9970","+E970","+E970","+E970","+9970","+9970","+E970","'E970","+9970","'E970","'9970"
970 DATA "#5M70","+5M70","#AA70","+AA70","'5570","#A570","+AA70","+AT70","#5T70","+5570","#AR70","#AR70","'5570","+A570","+AQ70","+5Q70"
980 DATA "#AO70","+5O70","+3370","#?370","'?370","+3370","#?370","+?370","#?370","+3370","+KF70","+?370","'KF70","+3370","+KF70","+3370"
990 DATA "#5M70","+5M70","#AA70","+AA70","'5570","#A570","+AA70","+AT70","#5T70","+5570","#AR70","#AR70","'5570","+A570","+AQ70","+5Q70"
1000 DATA "#AO70","+5O70","+3370","#?370","'?370","+3370","#?370","+?370","#?370","+3370","+KF70","+?370","'KF70","+3370","+KF70","+3370"
1010 DATA "'3370","'3370","'?370","+?370","'3370","'?370","'?370","'?370","+RF70","+3F70","+?370","+RF70","'3F70","'?370","'QE70","'3E70"
1020 DATA "+>270","+2270","+2270","+>270","'>270","+2270","+>270","+>270","+>270","+2270","+2270","+>270","'>270","+2270","'>270","'2270"
1030 DATA "FIN"
1040 '
1050 DATA 956,902,851,804,758,716,676,638,602,568,538,506
1060 DATA 478,451,426,402,379,358,338,319,301,284,268,253
1070 DATA 239,225,213,201,190,179,169,159,150,142,134,127
1080 DATA 119,113,106,100,95,89,84,80,75,71,67,63
1090 DATA 60,56,53,50,47,45,42,40,38,36,34,32
1100 DIM note(60):RESTORE 1050:FOR n=0 TO 59:READ note(n):NEXT:RETURN
1200 IF IK$="1" THEN RUN"DRUM.BAS"
1210 IF IK$="2" THEN RUN"TONE.BAS"
1220 GOTO 630