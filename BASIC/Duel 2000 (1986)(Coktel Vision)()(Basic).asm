0 CALL &9D00
10 CALL &BB48
17 DIM p%(1,105),d%(1,105),HAUTEUR(11),EV(11),ET(11),BRUIT(11):jeu=1:GOSUB 32000:GOSUB 30000:ii=1000:GOSUB 50000:GOSUB 37000:FOR i=1 TO 40:SOUND 1,10+200*RND,10,15:NEXT
19 IF PEEK(&9D00)=1 THEN RUN
20 GOSUB 40000
30 GOSUB 42000:GOSUB 44000
35 SC1=1000:SC2=1000:GOSUB 17000
36 IF c=1 THEN POKE &3538,2:CALL &35A8
40 POKE &353A,JEU:CALL &3604:fa1=0:fa2=0:nbf1=0:nbf2=0
50 POKE &3502,0:POKE &351E,66:FOR i=1 TO 11:IF jeu<3 THEN SOUND 1,0,1,13,0,0,5 ELSE jj=10*RND:FOR ii=1 TO jj:SOUND 1,10+200*RND,10,15:NEXT
51 POKE &3539,8:POKE &3538,1:CALL &35BD:POKE &3539,8:POKE &3538,2:CALL &35BD:FOR J=1 TO 3:CALL &36A2:II=50:GOSUB 50000:NEXT:NEXT
52 IF jeu<3 THEN GOSUB 32000:GOSUB 30000
53 EVERY 250 GOSUB 51000
55 POKE &3539,3:POKE &3538,1:CALL &35BD:POKE &3539,3:POKE &3538,2:CALL &35BD:FOR I=1 TO 4:CALL &36A2:II=550:GOSUB 50000:NEXT
98 '
100 IF FA1<NBF1 THEN 200
105 co1=0:JU=1:ncc=nc2:IF C=2 THEN nbf=nnbf2:fa=fa2:GOSUB 10000:nc11=nc:GOTO 116
110 POKE &353D,CL:CALL &353E:nc11=PEEK (&3539)
112 IF nc11>20 THEN nc11=0
116 IF nc11=8 OR nc11=4 THEN 120
117 IF nc11=nc1 THEN co1=0:GOTO 200
120 nc1=nc11
150 POKE &3539,nc1:POKE &3538,1:CO1=1:CALL &35BD:nbf1=PEEK(&350D)
160 c(nc1,0)=c(nc1,0)+40
198 '
200 IF FA2<NBF2 THEN 300
205 co2=0:JU=2:ncc=nc1:IF C<>1 THEN nbf=nbf1:fa=fa1:GOSUB 10000:nc22=nc:GOTO 216
210 POKE &353D,1:CALL &353E:NC22=PEEK(&3539)
216 IF nc22=8 OR nc22=4 THEN 220
217 IF nc22=nc2 THEN co2=0:GOTO 300
220 nc2=nc22
250 POKE &3539,nc2:POKE &3538,2:CO2=1:CALL &35BD:nbf2=PEEK(&3529)
260 c(nc1,1)=c(nc1,1)+40
299 '
300 IF co1+co2>0 THEN CALL &36A2:fa1=PEEK(&3504):fa2=PEEK(&3520):x1=PEEK(&3502):x2=PEEK(&351E):IF jeu<3 THEN SOUND 1,0,1,7,0,0,5 ELSE SOUND 1,10+200*RND,3,12 ELSE c1=INT(20.99*RND):c2=INT(1.99*RND):c(c1,c2)=c(c1,c2)-10
310 IF fa1>nbf1 THEN fa1=nbf1
311 IF fa2>nbf2 THEN fa2=nbf2
400 IF CO1=0 OR NBF1<>FA1 THEN 450
405 IF X2<>X1+INT(PEEK(&350F)/16) THEN 450
406 p1=PEEK(&3511) AND 15:p2=INT(PEEK(&3511)/16):p3=PEEK(&3512) AND 15:p4=INT(PEEK(&3512)/16)
410 IF (NC2=P1 OR NC2=p2 OR NC2=P3 OR NC2=p4) AND nc2<>0 THEN 450 ELSE JU=2:GOSUB 16000:sc1=sc1+INT(150-c(nc1,0)/2+10*RND):sc2=sc2-INT(100-c(nc1,0)/15+10*RND):fa2=0:nbf2=0:nc2=0:IF sc1<1 THEN sc1=1:GOSUB 17000 ELSE GOSUB 17000
450 IF CO2=0 OR nbf2<>fa2 THEN 500
455 IF X2<>X1+INT(PEEK(&352B)/16) THEN 500
456 p1=PEEK(&352D) AND 15:p2=INT(PEEK(&352D)/16):p3=PEEK(&352E) AND 15:p4=INT(PEEK(&352E)/16)
460 IF (NC1=P1 OR NC1=p2 OR nc1=p3 OR NC1=p4) AND nc1<>0 THEN 500 ELSE JU=1:GOSUB 16000:sc1=sc1-INT(150-c(nc2,1)/15+10*RND):sc2=sc2+INT(100-c(nc2,1)/2+10*RND):fa1=0:nbf1=0:nc1=0:IF sc2<1 THEN sc2=1:GOSUB 17000 ELSE GOSUB 17000
500 IF sc1<1 THEN ju=1:GOSUB 18000:sc2=sc2+1000
501 IF sc2<1 THEN ju=2:GOSUB 18000:sc1=sc1+1000
502 IF sc1<1 OR sc2<1 THEN IF c=2 THEN sc1=1000:sc2=1000:GOSUB 17000:GOTO 510 ELSE 600 
505 IF t>0 THEN 100
510 CLS #4:IF c<2 AND jeu<3 THEN t=50:jeu=jeu+1:GOSUB 17500:GOTO 40
520 IF C=2 AND JEU<3 THEN T=10:JEU=JEU+1:GOSUB 17500:GOTO 40
530 IF c<>2 THEN 600
532 LOCATE 4,20:PRINT "DUEL 2000 - Demonstration? (O,N)"
534 FOR i=1 TO 500:a$=INKEY$:IF a$="N" OR A$="n" OR A$="O" OR A$="o" THEN I=9999
535 NEXT:CLS #4
536 IF a$="n" OR a$="N" THEN 1000
538 t=10:jeu=1:GOTO 35
600 IF C>1 THEN 1000
630 IF jeu=3 THEN 700
650 jeu=jeu+1:CLS #4:sc1=sc1+1000:sc2=sc2+1000:GOSUB 17500
660 GOSUB 17000:t=50:GOTO 40
700 CLS #4:LOCATE 1,21:IF SC1=SC2 THEN PRINT "        EGALITE":GOTO 800
710 IF SC1>SC2 THEN PRINT "     JOUEUR 1 :  GAGNANT!":GOTO 800
720 PRINT "     JOUEUR 2 :  GAGNANT!"
800 FOR ii=1 TO 50:SOUND 1,10+200*RND,10,15:INK INT(RND*4.9),INT(RND*24):NEXT:INK 0,0:INK 1,24:INK 2,20:INK 3,15
1000 ii=200:GOSUB 50000:GOTO 30
4999 PRINT "FIN":END
10000 IF X2<X1+9 THEN 10050
10010 nc=0:IF RND<0.3 THEN nc=8
10020 RETURN
10050 p=PEEK(&350D+4+(2-jU)*28) AND 15:IF p>0 AND 500*RND<c(ncc,2-ju) AND (fa1=nbf1 OR fa1=nbf1-1) THEN nc=P:RETURN
10100 IF RND*ni<0.7 THEN 10120
10110 nc=INT(19*RND+0.99):IF NC=9 OR NC=10 OR NC=11 OR NC=12 OR NC=15 OR NC=19 OR NC=18 OR NC=20 OR nc=8 THEN RETURN
10120 NC=0:IF x2<x1+5 THEN nc=4
11999 RETURN
15000 POKE &3539,13:POKE &3538,JU:CALL &35BD:FOR I= 1 TO 3:CALL &36A2:II=200:GOSUB 50000:NEXT:RETURN 
16000 POKE &3539,7:POKE &3538,JU:CALL &35BD:CALL &36A2
16005 SOUND 1,0,4,15,0,0,51-ju*20:FOR i=1 TO 9:INK ju,6:INK ju,24+(1-ju)*4:NEXT:CALL &36A2:RETURN
17000 IF sc1<0 THEN sc1=0
17002 IF sc2<0 THEN sc2=0
17005 PEN 1:LOCATE 1,25:PRINT sc1;" ";:PEN 2:LOCATE 34,25:PRINT sc2;" ";:RETURN
17500 PEN 1:LOCATE 18,20:PRINT "PRET ?":FOR ii=0 TO 1:FOR iii=0 TO 20:c(iii,ii)=80*ni:NEXT:NEXT:FOR ii=1 TO 1000:NEXT:CLS #4:RETURN
18000 POKE &3539,13:POKE &3538,JU:CALL &35BD:FOR I= 1 TO 3:CALL &36A2:II=100:GOSUB 50000:NEXT 
18010 IF jeu=1 THEN GOSUB 32000:GOSUB 30000 ELSE IF jeu=2 THEN GOSUB 37000 ELSE FOR i=1 TO 30:SOUND 1,10+2000*RND,10,15:NEXT
18999 RETURN
30000 IF jeu=2 THEN GOSUB 37000:RETURN ELSE u=37:iw=0:tempo=36:vol=14
30010 ENV 1,1,12,1,19,0,1,12,-1,5,48,0,1,20,0,1
30020 I1=1:I2=1:I3=1:U=U+1
30030 SOUND 1,100,100,0:SOUND 2,100,100,0:SOUND 4,100,100,0
30040 IF P%(1,I1)=0 THEN I1=I1+1:GOTO 30060
30050 IF SQ(1)>130 THEN SOUND 1,P%(0,I1),D%(0,I1),0,1:I1=I1+1:IF P%(0,I1)<>19 THEN SOUND 1,1,1,0 ELSE SOUND 1,P%(1,I1-1),1,15:I1=I1+1
30060 IF P%(1,I2)=0 THEN I2=I2+1:GOTO 30100
30070 IF SQ(2)>130 THEN SOUND 2,P%(1,I2),D%(1,I2),0,1:I2=I2+1:IF P%(1,I2)<>19 THEN SOUND 2,1,1,0 ELSE SOUND 2,P%(1,I2-1),1,15:I2=I2+1 
30100 IF I1<U OR I2<U THEN 30040
30110 RETURN
32000 RESTORE 35000:IF jeu<>1 THEN RETURN
32010 FOR j=1 TO 35:READ p%(0,j),d%(0,j):NEXT:FOR j=1 TO 40:READ p%(1,j),d%(1,j):NEXT:RETURN
35000 DATA 94,59,94,19,94,19,106,39,106,19,19,-1,106,19,126,39,126,39,106,59,106,19,94,19,79,19,94,19,79,19,63,19,71,19,79,19
35010 DATA 94,79,94,79,106,19,94,19,79,19,94,19,106,39,106,39,63,39,63,19,71,19,79,39,79,39,94,39,94,39,106,39,106,39
35020 DATA 126,59,126,19,126,19,142,39,142,19,19,-1,142,19,159,39,159,39,142,59,142,19,126,19,94,19,126,19,94,19,79,19,94,19,106,19,126,79,126,79,126,19
35030 DATA 126,19,106,19,126,19,159,39,159,39,79,39,79,19,94,19,126,39,126,39,253,19,212,19,189,19,159,19,142,19,126,19,106,19,94,19,94,79,94,79
36000 DATA
37000 RESTORE 37240:GOSUB 37120
37010 RESTORE 37370:t%=5
37020 FOR ii=1 TO 6
37030 READ BATTERIE,DUR
37040 WHILE BATTERIE <> 0
37050 SOUND 1,HAUTEUR(BATTERIE),DUR*TEMPO,0,EV(BATTERIE),ET(BATTERIE),BRUIT(BATTERIE)
37060 READ BATTERIE,DUR
37070 WEND
37080 RESTORE 37390:IF t%=5 THEN RESTORE 37370 ELSE IF t%=6 THEN RESTORE 37380
37090 t%=t%+1:IF t%=8 THEN t%=5 ELSE IF t%=6 AND RND<0.5 THEN t%=5
37100 NEXT
37110 RETURN
37120 ENV 1,1,15,2,5,-3,4
37130 ENV 2,1,15,1,15,-1,2
37140 ENV 3,1,15,1,4,-2,2,7,-1,4
37150 ENV 4,7,2,1,14,-1,4
37160 ENV 5,1,15,1,15,-1,8
37170 ENT 1,1,-100,1,5,25,3
37180 ENT 2,1,-75,1,4,25,3
37190 ENT 3,1,4,2,1,-8,2,1,4,2
37210 FOR N=1 TO 11
37220 READ HAUTEUR(N),EV(N),ET(N),BRUIT(N)
37230 NEXT N
37240 DATA 270,1,2,2
37250 DATA 340,1,2,8
37260 DATA 390,1,2,15
37270 DATA 440,1,2,20
37280 DATA 900,1,1,31
37290 DATA 180,3,1,13
37300 DATA 0,4,0,1
37310 DATA 16,2,0,1
37320 DATA 0,1,0,15
37330 DATA 20,5,3,15
37340 DATA 80,1,0,10
37350 TEMPO=3:TEMPS$="1"
37360 RETURN
37370 DATA 8,6,8,6,6,6,8,6,8,6,6,3,6,3,1,3,1,3,4,3,4,3,0,0
37380 DATA 1,4,1,4,1,4,2,4,2,4,2,4,3,4,3,4,3,4,4,4,4,4,4,4,0,0
37390 DATA 1,3,1,3,1,3,1,3,2,3,2,3,2,3,2,3,3,3,3,3,3,3,3,3,4,3,4,3,4,3,4,3,0,0
40000 INK 0,0:INK 1,24:INK 2,20:INK 3,15:BORDER 2:PAPER 0:PEN 1
40010 WINDOW #1,15,35,17,23:WINDOW #3,15,27,15,23:WINDOW #2,1,40,23,24:CLS #3:CLS #2:PLOT 222,178,0:DRAW 400,178,0:PLOT 222,176,0:DRAW 400,176,0
40015 WINDOW #4,1,40,17,22:CLS #4
40020 DIM c(20,1)
40199 RETURN
42000 CLS #4:LOCATE 15,17:PRINT "1-PARTIE A 1 JOUEUR":LOCATE 15,18:PRINT "2-2 JOUEURS":LOCATE 15,19:PRINT "3-DEMONSTRATION":LOCATE 15,20:PRINT "4-ESSAI KARATE":LOCATE 15,21:PRINT "5-ESSAI COMBAT DE RUE":LOCATE 15,22:PRINT "6-ESSAI COMBAT 2000"
42005 FOR i=1 TO 20:a$=INKEY$:NEXT
42010 A$=INKEY$:C=VAL(A$):IF C=0 OR C>6 THEN 42010
42015 c=c-1:t=10:IF C=2 THEN jeu=1:ni=3:GOTO 42130
42016 t=50
42020 CLS#1:LOCATE 15,20:PRINT "1-AVEC MANETTE":LOCATE 15,22:PRINT "2-SANS MANETTE"
42030 A$=INKEY$:CL=VAL(A$):IF CL=0 OR CL>2 THEN 42030
42040 IF CL=2 AND C=1 THEN CLS#1:LOCATE 1,23:PRINT "NON! A 2 joueurs, il faut la manette.":ii=3000:GOSUB 50000:CLS#2:GOTO 42000 
42045 CL=CL-1
42050 IF c<3 THEN NI=3:GOTO 42100
42060 CLS #1:LOCATE 15,19:PRINT "1-DEBUTANT":LOCATE 15,21:PRINT "2-EXPERIMENTE":LOCATE 15,23:PRINT "3-TOP NIVEAU"
42070 A$=INKEY$:NI=VAL(A$):IF NI=0 OR NI>3 THEN 42070
42100 IF C<4 THEN JEU=1
42110 IF C=4 THEN JEU=2
42120 IF C=5 THEN JEU=3
42130 CLS #1:FOR J=0 TO 1:FOR I=1 TO 20:C(I,J)=80*ni:NEXT:NEXT
42140 IF cl=1 THEN POKE &3538,1:CALL &35A8
42150 IF c=1 THEN POKE &3538,2:CALL &35A8
43999 RETURN
44000 NC1=0:NC2=0:FA1=0:FA2=0:co1=0:co2=0
44010 PEN 1:LOCATE 1,24:PRINT "SCORE 1":PEN 2:LOCATE 34,24:PRINT "SCORE 2":PEN 3:LOCATE 18,24:PRINT "TIME"
45999 RETURN
50000 FOR iii=1 TO ii:NEXT:RETURN
51000 IF t>0 THEN t=t-1
51002 PEN 3:LOCATE 18,25:PRINT t;
51010 RETURN