; Music of Ninja Grannies End Game (1989)(Clockwize Software)()()
; Ripped by Megachur the 14/04/2019
; $VER 1.5

IFDEF FILENAME_WRITE
	write "NINJAGEG.BIN"
ENDIF

MUSIC_DATE_RIP_DAY		equ 14
MUSIC_DATE_RIP_MONTH	equ 04
MUSIC_DATE_RIP_YEAR		equ 2019
music_adr				equ #18cd

	read "music_header.asm"

;
.real_init_music
;
	push hl
	sub a
	ld (l2041),a
	ld (l2039),a
	ld (l203a),de
	ld hl,l1ffd
	call l1b3e
	ld ix,l2019
	pop hl
	ld (l2042),hl
	ld hl,#0001
	ld (l2044),hl
	ld (l203c),hl
	ld b,#04
.l18f2
	ld (ix+#00),#00
	ld (ix+#01),#00
	ld (ix+#02),#00
	ld (ix+#03),#00
	inc ix
	inc ix
	inc ix
	inc ix
	djnz l18f2
	sub a
	ld (l2049),a
	ld a,#01
	ld (l2041),a
	ld (l2039),a
	ret
.l1919
	ld hl,(l2044)
	dec hl
	ld (l2044),hl
	ld a,l
	or h
	cp #00
	ret nz
	ld hl,(l2042)
.l1928
	ld a,(hl)
	cp #ff
	jr z,l193d
	bit 4,a
	jr nz,l1992
	bit 7,a
	jr nz,l197f
	bit 5,a
	jp nz,l19b4
	jp l1942
.l193d
	sub a
	ld (l2041),a
	ret
.l1942
	ld a,(hl)
	ld (l204b),a
	call l1b2b
	ld a,#0f
	ld (ix+#02),a
	ld a,#01
	ld (ix+#00),a
	inc hl
	push hl
	ld a,(hl)
	add a
	ld hl,l204c
	ld e,a
	ld d,#00
	add hl,de
	ld a,(l204b)
	ld e,a
	add a
	ld (l204b),a
	ld c,(hl)
	call l1b4e
	ld a,(l204b)
	inc a
	inc hl
	ld c,(hl)
	call l1b4e
	ld a,e
	add #08
	ld c,#0f
	call l1b4e
	pop hl
	jp l1992
.l197f
	ld a,(hl)
	res 7,a
	call l1b2b
	ld a,#02
	ld (ix+#00),a
	inc hl
	ld a,(hl)
	ld (ix+#01),a
	ld (ix+#03),a
.l1992
	inc hl
	ld a,#00
	ld (l2045),a
	ld a,(hl)
	ld (l2044),a
	bit 7,a
	jr z,l19aa
	res 7,a
	ld (l2045),a
	inc hl
	ld a,(hl)
	ld (l2044),a
.l19aa
	inc hl
	ld (l2042),hl
	cp #00
	ret nz
	jp l1928
.l19b4
	cp #21
	jr z,l19c6
	inc hl
	ld (l2046),hl
	sub a
	ld (l2048),a
	ld (l2042),hl
	jp l1928
.l19c6
	ld a,(l2048)
	cp #00
	jr z,l19e6
	dec a
	ld (l2048),a
	cp #00
	jr z,l19de
	ld hl,(l2046)
	ld (l2042),hl
	jp l1928
.l19de
	inc hl
	inc hl
	ld (l2042),hl
	jp l1928
.l19e6
	inc hl
	ld a,(hl)
	ld (l2048),a
	ld hl,(l2046)
	ld (l2042),hl
	jp l1928
.l19f4
	ld hl,(l203c)
	dec hl
	ld (l203c),hl
	ld a,l
	or h
	cp #00
	ret nz
	ld hl,(l203a)
.l1a03
	ld a,(hl)
	cp #ff
	jr z,l1a76
	bit 7,a
	jp nz,l1a7b
	push hl
	res 6,a
	cp #02
	jp z,l1a39
	cp #01
	jp z,l1a2c
	cp #03
	jp z,l1a46
	ld a,#06
	ld c,#01
	call l1b4e
	ld hl,l1ff4
	jp l1a50
.l1a2c
	ld a,#06
	ld c,#04
	call l1b4e
	ld hl,l1ff7
	jp l1a50
.l1a39
	ld a,#06
	ld c,#0f
	call l1b4e
	ld hl,l1ffa
	jp l1a50
.l1a46
	ld a,#06
	ld c,#00
	call l1b4e
	ld hl,l1ff1
.l1a50
	call l1abb
	pop hl
	inc hl
	ld a,#00
	ld (l203d),a
	ld a,(hl)
	ld (l203c),a
	bit 7,a
	jr z,l1a6c
	res 7,a
	ld (l203d),a
	inc hl
	ld a,(hl)
	ld (l203c),a
.l1a6c
	inc hl
	ld (l203a),hl
	cp #00
	ret nz
	jp l1a03
;
.stop_music
.l1a76	; stop music
;
	sub a
	ld (l2039),a
	ret
.l1a7b
	cp #81
	jr z,l1a8d
	inc hl
	ld (l203e),hl
	sub a
	ld (l2040),a
	ld (l203a),hl
	jp l1a03
.l1a8d
	ld a,(l2040)
	cp #00
	jr z,l1aad
	dec a
	ld (l2040),a
	cp #00
	jr z,l1aa5
	ld hl,(l203e)
	ld (l203a),hl
	jp l1a03
.l1aa5
	inc hl
	inc hl
	ld (l203a),hl
	jp l1a03
.l1aad
	inc hl
	ld a,(hl)
	ld (l2040),a
	ld hl,(l203e)
	ld (l203a),hl
	jp l1a03
.l1abb
	ld a,#0b
.l1abd
	push af
	ld c,(hl)
	call l1b4e
	pop af
	inc a
	inc hl
	cp #0e
	jr nz,l1abd
	ret
.l1aca
	ld ix,l2019
	ld a,#00
	ld (l204a),a
.l1ad3
	ld a,(ix+#00)
	cp #02
	jp z,l1aef
.l1adb
	inc ix
	inc ix
	inc ix
	inc ix
	ld a,(l204a)
	inc a
	ld (l204a),a
	cp #04
	jr nz,l1ad3
	ret
.l1aef
	ld a,(ix+#01)
	dec a
	ld (ix+#01),a
	cp #00
	jp nz,l1adb
	ld a,(ix+#03)
	ld (ix+#01),a
	ld c,(ix+#02)
	dec c
	ld (ix+#02),c
	ld a,c
	cp #00
	jp z,l1b19
	ld a,(l204a)
	add #08
	call l1b4e
	jp l1adb
.l1b19
	ld a,(l204a)
	add #08
	ld c,#00
	call l1b4e
	ld a,#00
	ld (ix+#00),a
	jp l1adb
.l1b2b
	push af
	push hl
	push de
	ld de,l2019
	add a
	add a
	ld l,a
	ld h,#00
	add hl,de
	push hl
	pop ix
	pop de
	pop hl
	pop af
	ret
.l1b3e
	xor a
.l1b3f
	ld c,(hl)
	push af
	push hl
	call l1b4e
	pop hl
	pop af
	inc hl
	inc a
	cp #0e
	ret z
	jr l1b3f
.l1b4e
	ld b,#f4
	out (c),a
	ld b,#f6
	in a,(c)
	or #c0
	out (c),a
	and #3f
	out (c),a
	ld b,#f4
	out (c),c
	ld b,#f6
	ld c,a
	or #80
	out (c),a
	out (c),c
	ret
;
.play_music
.l1b6c
;
	ld a,(l0577)
	cp #01
	jr nz,l1b6c
	ld a,(l2041)
	cp #00
	jr z,l1b80
	call l1919
	call l1aca
.l1b80
	ld a,(l2039)
	cp #00
	ret z
	call l19f4
	ret
.l1b8a
	db #20,#00,#40,#00,#01,#45,#06,#80
	db #02,#00,#81,#02,#03,#21,#03,#20
	db #00,#43,#00,#01,#3e,#0c,#80,#02
	db #00,#81,#02,#06,#21,#01,#20,#00
	db #3b,#00,#01,#40,#0c,#80,#02,#00
	db #81,#02,#06,#21,#01,#00,#43,#00
	db #01,#3e,#18,#80,#04,#00,#81,#04
	db #0c,#00,#34,#00,#01,#40,#18,#80
	db #04,#00,#81,#04,#0c,#00,#36,#00
	db #01,#42,#1a,#80,#04,#00,#81,#04
	db #0d,#00,#38,#00,#01,#44,#1c,#80
	db #04,#00,#81,#04,#0e,#00,#3d,#00
	db #01,#28,#06,#80,#02,#03,#20,#00
	db #40,#06,#80,#02,#03,#21,#02,#81
	db #02,#00,#00,#40,#09,#01,#25,#06
	db #81,#02,#03,#01,#26,#06,#81,#02
	db #03,#01,#28,#06,#81,#02,#00,#80
	db #02,#03,#01,#2a,#00,#00,#3e,#06
	db #80,#02,#03,#00,#42,#06,#80,#02
	db #03,#00,#42,#06,#80,#02,#03,#00
	db #42,#06,#80,#02,#00,#81,#02,#03
	db #00,#42,#09,#01,#26,#06,#81,#02
	db #03,#01,#28,#06,#81,#02,#03,#01
	db #2a,#06,#81,#02,#03,#01,#2c,#00
	db #00,#44,#06,#80,#02,#00,#81,#02
	db #03,#20,#01,#2c,#00,#00,#44,#02
	db #80,#01,#00,#81,#01,#01,#21,#01
	db #20,#01,#2c,#00,#00,#44,#06,#80
	db #02,#00,#81,#02,#03,#21,#01,#01
	db #2a,#00,#00,#42,#06,#80,#02,#00
	db #81,#02,#03,#01,#29,#00,#00,#41
	db #06,#80,#02,#00,#81,#02,#03,#01
	db #28,#00,#00,#40,#0c,#80,#02,#00
	db #81,#02,#06,#01,#2c,#00,#00,#44
	db #06,#80,#02,#00,#81,#02,#03,#20
	db #01,#2c,#00,#00,#44,#02,#80,#01
	db #00,#81,#01,#01,#21,#01,#20,#01
	db #2c,#00,#00,#44,#06,#80,#02,#00
	db #81,#02,#03,#21,#01,#01,#2a,#00
	db #00,#42,#06,#80,#02,#00,#81,#02
	db #03,#01,#29,#00,#00,#41,#06,#80
	db #02,#00,#81,#02,#03,#00,#40,#00
	db #01,#28,#06,#81,#02,#03,#01,#28
	db #06,#81,#02,#00,#80,#02,#03,#01
	db #2d,#00,#00,#45,#06,#80,#02,#03
	db #00,#45,#06,#80,#02,#00,#81,#02
	db #03,#01,#2d,#00,#00,#45,#06,#80
	db #02,#03,#00,#45,#06,#80,#02,#00
	db #81,#02,#03,#00,#45,#00,#01,#2a
	db #06,#81,#02,#00,#80,#02,#03,#00
	db #45,#00,#01,#2a,#0c,#81,#02,#00
	db #80,#02,#06,#00,#45,#00,#01,#2a
	db #06,#81,#02,#00,#80,#02,#03,#00
	db #47,#00,#01,#2f,#06,#81,#02,#00
	db #80,#02,#03,#20,#00,#42,#00,#01
	db #2a,#06,#81,#02,#00,#80,#02,#03
	db #21,#02,#00,#47,#00,#01,#2f,#14
	db #81,#02,#00,#80,#02,#0a,#00,#45
	db #00,#01,#2a,#06,#81,#02,#00,#80
	db #02,#03,#01,#2c,#00,#00,#44,#06
	db #80,#02,#03,#00,#44,#06,#80,#02
	db #00,#81,#02,#03,#00,#44,#06,#80
	db #02,#03,#00,#44,#03,#80,#02,#01
	db #00,#44,#03,#80,#02,#02,#01,#2c
	db #00,#00,#44,#06,#80,#02,#03,#00
	db #44,#06,#80,#02,#00,#81,#02,#03
	db #00,#44,#00,#01,#2f,#06,#80,#02
	db #00,#81,#02,#03,#00,#42,#00,#01
	db #2f,#06,#80,#02,#00,#81,#02,#03
	db #00,#40,#00,#01,#28,#06,#80,#02
	db #00,#81,#02,#03,#00,#40,#00,#01
	db #28,#06,#80,#02,#00,#81,#02,#03
	db #00,#42,#00,#01,#2a,#06,#80,#02
	db #00,#81,#02,#03,#00,#44,#00,#01
	db #2c,#06,#80,#02,#00,#81,#02,#03
	db #00,#45,#00,#01,#2d,#18,#80,#02
	db #00,#81,#02,#0c,#00,#49,#00,#01
	db #31,#18,#80,#04,#00,#81,#04,#0c
	db #00,#45,#00,#01,#2d,#18,#80,#04
	db #00,#81,#04,#0c,#00,#44,#00,#01
	db #2c,#06,#80,#02,#00,#81,#02,#03
	db #20,#00,#42,#00,#01,#2a,#06,#80
	db #02,#00,#81,#02,#03,#21,#02,#00
	db #42,#00,#01,#2a,#18,#80,#04,#00
	db #81,#04,#0c,#00,#44,#00,#01,#2c
	db #06,#80,#02,#03,#00,#44,#06,#80
	db #02,#00,#81,#02,#03,#00,#44,#06
	db #80,#02,#03,#00,#44,#00,#01,#2c
	db #06,#80,#02,#00,#81,#02,#03,#00
	db #44,#00,#01,#2c,#18,#80,#04,#00
	db #81,#04,#0c,#00,#42,#00,#01,#2a
	db #06,#80,#02,#00,#81,#02,#03,#20
	db #00,#40,#00,#01,#28,#06,#80,#02
	db #00,#81,#02,#03,#21,#02,#00,#40
	db #00,#01,#28,#18,#80,#04,#00,#81
	db #04,#0c,#00,#49,#00,#01,#31,#18
	db #80,#04,#00,#81,#04,#0c,#00,#45
	db #00,#01,#2d,#18,#80,#04,#00,#81
	db #04,#0c,#00,#44,#00,#01,#2c,#06
	db #80,#02,#00,#81,#02,#03,#20,#00
	db #42,#00,#01,#2a,#06,#80,#02,#00
	db #81,#02,#03,#21,#02,#00,#47,#00
	db #01,#2f,#0c,#80,#02,#00,#81,#02
	db #06,#00,#45,#00,#01,#2d,#0c,#80
	db #02,#00,#81,#02,#06,#01,#2c,#00
	db #00,#44,#06,#80,#02,#03,#00,#44
	db #03,#80,#01,#02,#00,#44,#03,#80
	db #01,#00,#81,#04,#01,#00,#44,#06
	db #80,#02,#03,#00,#44,#06,#80,#02
	db #03,#01,#2c,#00,#00,#44,#03,#80
	db #01,#02,#00,#44,#03,#80,#01,#02
	db #00,#44,#06,#80,#02,#00,#81,#04
	db #03,#00,#44,#06,#80,#02,#03,#00
	db #42,#00,#01,#28,#06,#80,#02,#00
	db #81,#02,#03,#20,#00,#40,#00,#01
	db #32,#06,#80,#02,#00,#81,#02,#03
	db #21,#01,#00,#42,#00,#01,#31,#06
	db #80,#02,#00,#81,#02,#03,#00,#44
	db #00,#01,#2f,#06,#80,#02,#00,#81
	db #02,#03,#00,#45,#00,#01,#2d,#18
	db #80,#04,#00,#81,#04,#7f,#ff
.l1f51
	db #10
	db #80,#90,#43,#24,#43,#27,#43,#2a
	db #80,#42,#09,#40,#09,#41,#09,#43
	db #09,#81,#03,#80,#40,#09,#40,#03
	db #40,#03,#40,#09,#40,#09,#40,#09
	db #40,#09,#40,#09,#41,#09,#81,#01
	db #80,#40,#09,#41,#09,#81,#03,#42
	db #09,#80,#40,#03,#81,#08,#41,#1e
	db #40,#09,#42,#09,#40,#09,#40,#09
	db #40,#03,#40,#03,#42,#09,#40,#09
	db #10,#12,#42,#09,#40,#09,#40,#09
	db #40,#09,#43,#26,#41,#12,#42,#12
	db #41,#12,#42,#12,#80,#40,#09,#40
	db #03,#40,#03,#40,#03,#40,#09,#40
	db #09,#43,#24,#81,#02,#41,#12,#42
	db #12,#41,#12,#42,#12,#40,#09,#40
	db #03,#40,#03,#40,#03,#40,#09,#40
	db #09,#43,#12,#43,#12,#80,#40,#03
	db #81,#14,#43,#09,#41,#09,#41,#09
	db #40,#09,#40,#09,#43,#24,#40,#03
	db #40,#03,#40,#03,#42,#7f,#ff
.l1ff7 equ $ + 6
.l1ff4 equ $ + 3
.l1ff1
	db #00,#14,#01,#00,#02,#01,#00,#08
.l1ffd equ $ + 4
.l1ffa equ $ + 1
	db #01,#00,#08,#01,#00,#00,#00,#00
	db #00,#00,#0a,#1c,#00,#00,#10,#00
	db #00,#01,#00,#00,#00,#00,#00,#00
	db #00,#3f,#00,#00,#00,#00,#00,#00
.l2019
	db #00,#00,#00,#00,#00,#00,#00,#00
	db #00,#00,#00,#00,#00,#00,#00,#00
	db #00,#00,#00,#00,#00,#00,#00,#00
	db #00,#00,#00,#00,#00,#00,#00,#00
.l2040 equ $ + 7
.l203e equ $ + 5
.l203d equ $ + 4
.l203c equ $ + 3
.l203a equ $ + 1
.music_end
.l2039
	db #00,#00,#00,#00,#00,#00,#00,#00
.l2048 equ $ + 7
.l2046 equ $ + 5
.l2045 equ $ + 4
.l2044 equ $ + 3
.l2042 equ $ + 1
.l2041
	db #00,#00,#00,#00,#00,#00,#00,#00
.l204b equ $ + 2
.l204a equ $ + 1
.l2049
	db #00,#00,#00
.l204c
	dw #0eee,#0e18,#0d4d,#0c8e
	dw #0bda,#0b2f,#0a8f,#09f7
	dw #0968,#08e1,#0861,#07e9
	dw #0777,#070c,#06a7,#0647
	dw #05ed,#0598,#0547,#04fc
	dw #04b4,#0470,#0431,#03f4
	dw #03bc,#0386,#0353,#0324
	dw #02f6,#02cc,#02a4,#027e
	dw #025a,#0238,#0218,#01fa
	dw #01de,#01c3,#01aa,#0192
	dw #017b,#0166,#0152,#013f
	dw #012d,#011c,#010c,#00fd
	dw #00ef,#00e1,#00d5,#00c9
	dw #00be,#00ad,#00a9,#009f
	dw #0096,#008e,#0086,#007f
	dw #0077,#0071,#006a,#0064
	dw #005f,#0059,#0054,#0050
	dw #004b,#0047,#0043,#003f
	dw #003c,#0038,#0035,#0032
	dw #002f,#002d,#002a,#0028
	dw #0026,#0024,#0022,#0020
	dw #001e,#001c,#001b,#0019
	dw #0018,#0016,#0015,#0014
	dw #0013,#0012,#0011,#0010
;
.l0577
	db #01
;
; #033f
;	ld hl,#1b8a
;	ld de,#1f51
;	call #18cd
;
.init_music		; added by Megachur
;
	ld hl,l1b8a
	ld de,l1f51
	jp real_init_music
;
.music_info
	db "Ninja Grannies End Game (1989)(Clockwize Software)()",0
	db "",0

	read "music_end.asm"
