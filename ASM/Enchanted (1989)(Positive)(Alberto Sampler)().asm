; Music of Enchanted (1989)(Positive)(Alberto Sampler)()
; Ripped by Megachur the 17/04/2018
; $VER 1.5

IFDEF FILENAME_WRITE
	write "ENCHANTE.BIN"
ENDIF

MUSIC_DATE_RIP_DAY		equ 17
MUSIC_DATE_RIP_MONTH	equ 04
MUSIC_DATE_RIP_YEAR		equ 2018
music_adr				equ #bbc6

	read "music_header.asm"

;
.init_music
.lbbc6
;
	ld a,#07
	ld c,#3f
	call lbcb0
	ld hl,lbcce
	ld (lbfb9),hl
	ld hl,lbddc
	ld (lbfbb),hl
	xor a
	ld (lbfbd),a
	ld (lbfbf),a
	ret
;
.play_music
.lbbe1
;
	ld a,(lbfbd)
	or a
	jp nz,lbc31
	ld hl,(lbfb9)
	ld c,(hl)
	inc hl
	ld b,(hl)
	inc hl
	ld a,(hl)
	cp #ff
	jp nz,lbc02
	ld hl,lbcce		; reset music ?
	ld (lbfb9),hl
	xor a
	ld (lbfbd),a
	jp lbbe1
.lbc02
	ld (lbfbd),a
	inc hl
	ld (lbfb9),hl
	xor a
	inc b
.lbc0b
	add #18
	djnz lbc0b
	sub #18
	ld ix,lbf41
	ld e,a
	ld d,#00
	add ix,de
	ld a,c
	dec a
	add a
	ld e,a
	add ix,de
	ld l,(ix+#00)
	ld h,(ix+#01)
	xor a
	ld c,l
	call lbcb0
	ld a,#01
	ld c,h
	call lbcb0
.lbc31
	ld a,(lbfbf)
	or a
	jp nz,lbc82
	ld hl,(lbfbb)
	ld c,(hl)
	inc hl
	ld b,(hl)
	inc hl
	ld a,(hl)
	cp #ff
	jp nz,lbc52
	ld hl,lbddc
	ld (lbfbb),hl
	xor a
	ld (lbfbf),a
	jp lbc31
.lbc52
	ld (lbfbf),a
	inc hl
	ld (lbfbb),hl
	xor a
	inc b
.lbc5b
	add #18
	djnz lbc5b
	sub #18
	ld ix,lbf41
	ld e,a
	ld d,#00
	add ix,de
	ld a,c
	dec a
	add a
	ld e,a
	add ix,de
	ld l,(ix+#00)
	ld h,(ix+#01)
	ld a,#02
	ld c,l
	call lbcb0
	ld a,#03
	ld c,h
	call lbcb0
.lbc82
	ld a,#08
	ld c,#0f
	call lbcb0
	ld a,#09
	ld c,#0f
	call lbcb0
	ld c,#3c
	ld a,#07
	call lbcb0
	ld bc,#7530
.lbc9a
	dec bc
	ld a,b
	or c
	jp nz,lbc9a
	ld hl,lbfbd
	dec (hl)
	ld hl,lbfbf
	dec (hl)
	ld c,#3f
	ld a,#07
	call lbcb0
	ret
.lbcb0
	ld b,#f4
	out (c),a
	ld b,#f6
	in a,(c)
	or #c0
	out (c),a
	and #3f
	out (c),a
	ld b,#f4
	out (c),c
	ld b,#f6
	ld c,a
	or #80
	out (c),a
	out (c),c
	ret
.lbcce
	db #03,#03,#01,#0a,#03,#01,#08,#03
	db #02,#08,#03,#01,#06,#03,#01,#03
	db #03,#02,#03,#03,#01,#03,#03,#01
	db #03,#03,#01,#0a,#03,#02,#08,#03
	db #02,#07,#03,#01,#03,#03,#01,#01
	db #03,#02,#01,#04,#02,#0b,#03,#02
	db #0a,#03,#01,#03,#03,#01,#0a,#03
	db #01,#08,#03,#02,#08,#03,#01,#06
	db #03,#01,#03,#03,#02,#06,#03,#01
	db #01,#04,#01,#0c,#03,#02,#0c,#03
	db #01,#0a,#03,#01,#06,#03,#02,#03
	db #03,#01,#03,#03,#01,#03,#03,#01
	db #0a,#03,#01,#0c,#03,#01,#0a,#03
	db #01,#08,#03,#01,#07,#03,#01,#03
	db #03,#01,#0a,#03,#01,#08,#03,#02
	db #08,#03,#01,#06,#03,#01,#03,#03
	db #02,#03,#03,#01,#03,#03,#01,#03
	db #03,#01,#05,#04,#02,#03,#04,#02
	db #02,#04,#01,#0a,#03,#01,#08,#03
	db #02,#01,#03,#02,#0b,#02,#02,#0a
	db #02,#01,#03,#03,#01,#03,#03,#01
	db #03,#03,#01,#08,#03,#01,#0a,#03
	db #01,#08,#03,#01,#06,#03,#02,#03
	db #03,#02,#01,#03,#02,#03,#03,#02
	db #06,#03,#02,#03,#03,#01,#03,#03
	db #01,#03,#03,#01,#08,#03,#01,#0a
	db #03,#01,#08,#03,#01,#06,#03,#01
	db #03,#03,#01,#01,#03,#01,#03,#03
	db #01,#06,#03,#02,#06,#03,#01,#06
	db #03,#01,#06,#03,#02,#03,#03,#01
	db #03,#03,#01,#0a,#03,#03,#08,#03
	db #02,#06,#03,#01,#01,#03,#01,#01
	db #03,#01,#06,#03,#03,#05,#03,#02
.lbddc equ $ + 6
	db #03,#03,#01,#00,#00,#ff,#06,#00
	db #01,#03,#01,#01,#03,#01,#01,#00
	db #01,#01,#06,#01,#01,#03,#01,#01
	db #00,#01,#01,#03,#01,#01,#00,#01
	db #01,#08,#00,#01,#0c,#00,#01,#03
	db #01,#01,#03,#01,#01,#00,#01,#01
	db #00,#01,#01,#03,#01,#01,#06,#01
	db #01,#0a,#00,#01,#0a,#00,#01,#00
	db #00,#01,#05,#01,#01,#00,#01,#01
	db #01,#01,#01,#00,#01,#01,#05,#01
	db #01,#03,#01,#01,#00,#01,#01,#0a
	db #01,#01,#06,#01,#01,#03,#01,#01
	db #00,#01,#01,#03,#01,#01,#00,#01
	db #01,#08,#00,#01,#0c,#00,#01,#03
	db #01,#01,#03,#01,#01,#00,#01,#01
	db #00,#01,#01,#03,#01,#01,#06,#01
	db #01,#0a,#00,#01,#0a,#00,#01,#00
	db #00,#01,#0a,#00,#01,#00,#00,#01
	db #0a,#00,#01,#00,#00,#01,#05,#01
	db #01,#03,#01,#01,#00,#01,#01,#0a
	db #00,#01,#06,#01,#01,#03,#01,#01
	db #00,#01,#01,#03,#01,#01,#00,#01
	db #01,#08,#00,#01,#03,#01,#01,#0c
	db #00,#01,#0c,#00,#01,#00,#00,#01
	db #00,#00,#01,#03,#01,#01,#06,#01
	db #01,#0a,#00,#01,#0a,#00,#01,#00
	db #00,#01,#0a,#00,#01,#00,#00,#01
	db #0a,#00,#01,#00,#00,#01,#01,#01
	db #01,#03,#01,#01,#03,#01,#01,#00
	db #01,#01,#00,#01,#01,#03,#01,#01
	db #00,#01,#01,#00,#01,#01,#0c,#00
	db #01,#08,#00,#01,#08,#00,#01,#00
	db #00,#01,#00,#00,#01,#08,#00,#01
	db #00,#00,#01,#0c,#00,#01,#03,#01
	db #01,#08,#00,#01,#08,#00,#01,#00
	db #00,#01,#03,#01,#01,#00,#01,#01
	db #00,#01,#01,#00,#01,#01,#08,#00
	db #01,#03,#01,#01,#06,#01,#01,#08
	db #01,#01,#06,#01,#01,#03,#01,#01
	db #0c,#00,#01,#08,#00,#01,#0c,#00
	db #01,#08,#00,#01,#08,#00,#01,#00
	db #00,#01,#00,#00,#01,#08,#00,#01
	db #00,#00,#01,#00,#00,#01,#08,#00
	db #01,#0a,#00,#01,#06,#01,#01,#05
	db #01,#01,#01,#01,#01,#0a,#00,#03
	db #00,#00,#ff
.lbf41
	dw #01de,#01c3,#01aa,#0192
	dw #017b,#0166,#0152,#013f
	dw #012d,#011c,#010c,#00fd
	dw #00ef,#00e1,#00d5,#00c9
	dw #00be,#00b3,#00a9,#009f
	dw #0096,#008e,#0086,#007f
	dw #0077,#0071,#006a,#0064
	dw #005f,#0059,#0054,#0050
	dw #004b,#0047,#0043,#003f
	dw #003c,#0038,#0035,#0032
	dw #002f,#002d,#002a,#0028
	dw #0026,#0024,#0022,#0020
	dw #001e,#001c,#001b,#0019
	dw #0018,#0016,#0015,#0014
	dw #0013,#0012,#0011,#0010
.lbfbf equ $ + 6
.lbfbd equ $ + 4
.lbfbb equ $ + 2
.lbfb9
	db #00,#00,#00,#00,#00,#00,#00,#00
;db #06,#1e,#c5,#21,#c8,#00,#06,#14
;db #c5,#e5,#11,#ce,#c8,#45,#00,#55
;db #be,#00,#00,#58,#be,#56,#c5,#f1
;db #d9,#e4,#a7,#00,#a7,#ff,#a6,#30
;db #ce,#00,#00,#ff,#a6,#3b,#00,#8d
;db #03,#cb,#01,#a2,#b9,#85,#7f,#ba
;db #d0,#ee,#fe,#fe,#ce,#f4,#01,#a2
;db #b9,#85,#7f,#8e,#f2,#6f,#de,#00
;db #00
;
.music_info
	db "Enchanted (1989)(Positive)(Alberto Sampler)",0
	db "",0

	read "music_end.asm"
