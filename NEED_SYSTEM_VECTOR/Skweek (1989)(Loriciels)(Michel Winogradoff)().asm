; Music of Skweek (1989)(Loriciels)(Michel Winogradoff)()
; Ripped by Megachur the 14/04/2018
; $VER 1.5

IFDEF FILENAME_WRITE
	write "SKWEEK.BIN"
ENDIF

MUSIC_DATE_RIP_DAY		equ 14
MUSIC_DATE_RIP_MONTH	equ 04
MUSIC_DATE_RIP_YEAR		equ 2018
music_adr				equ #6752
FIRST_THEME				equ 0
LAST_THEME				equ 2	; 0 -> 2
NEED_SYSTEM_VECTOR		equ 1

	read "music_header.asm"

.l6752
	ld a,#01
.l6754
	push af
	push hl
	inc hl
	call l6855
	pop hl
	ld e,(hl)
	ld d,#00
	add hl,de
	pop de
	ld a,(hl)
	cp #ff
	ret z
	ld a,d
	inc a
	jr l6754

;
.init_music
.l6768		; init music 
;
;	ld a,(l7825)	; modified by Megachur
	ld hl,l6cc5
;	bit 4,a		; modified by Megachur
	cp 2
	jr z,l677c
	ld hl,l6cb5
;	bit 3,a
	cp 1
	jr z,l677c
	ld hl,l6cbd
.l677c
	ld de,l77ef
	ld bc,#0006
	ldir
	xor a
	ld (l77ed),a
	ld e,(hl)
	inc hl
	ld d,(hl)
	ex de,hl
	call l6752
	call l71e6
;	call l6825		; modified by Megachur
;	ret
; .l6825
	ld b,#08
	ld hl,l77e0
	ld (hl),#83
.l682c
	inc hl
	ld (hl),#00
	djnz l682c
	dec hl
	ld (hl),#01
	ld hl,l77e0
	call #bcaa
	ret
.l6855
	ld de,l78f8
	ld bc,#0020
	ldir
	ld hl,l78f8
	call #bcbc
	ld b,#00
	ld a,(l7825)
	and #30
	cp #20
	jr nz,l6870
	ld b,#02
.l6870
	ld a,b
	ld (l7828),a
	ret

.l6cb5
	dw l1370,l10b5,l0cf7
	dw l0b99
.l6cbd
	dw l1360,l0d65,l0ce2
	dw l0bbd
.l6cc5
	dw l1350,l0d0a,l0ce0
	dw l0bd4

;
.play_music
.l6fbb		; play
;
	ld a,(l77ed)
	cp #00
	jr nz,l6fc5
	call l7188
.l6fc5
	ld hl,l77e0
	call #bcaa
	jr nc,l6fd0
	xor a
	jr l6fd2
.l6fd0
	ld a,#01
.l6fd2
	ld (l77ed),a
	ret

.l7188
	ld hl,(l77e9)
	ld e,(hl)
	inc hl
	ld d,(hl)
	inc hl
	ld (l77e9),hl
	ld bc,l77e0
	ld a,e
	and #03
	ld l,a
	ld a,e
	rlca
	and #18
	or l
	ld (bc),a
	inc bc
	ld a,d
	rlca
	rlca
	and #03
	inc a
	ld (bc),a
	inc bc
	ld a,(l7828)
	ld (bc),a
	inc bc
	ld a,d
	and #3f
	rlca
	ld hl,l1380
	add l
	nop
	nop
	ld l,a
	ld a,(hl)
	ld (bc),a
	inc hl
	inc bc
	ld a,(hl)
	ld (bc),a
	inc bc
	xor a
	ld (bc),a
	inc bc
	ld (bc),a
	inc bc
	ld a,e
	rrca
	rrca
	rrca
	rrca
	and #0f
	ld hl,(l77ef)
	add l
	jr nc,l71d2
	inc h
.l71d2
	ld l,a
	ld a,(hl)
	ld (bc),a
	inc bc
	xor a
	ld (bc),a
	ld hl,l77ee
	dec (hl)
	xor a
	cp (hl)
	ret nz
	ld hl,(l77eb)
	inc hl
	cp (hl)
	jr nz,l71e9
.l71e6
	ld hl,(l77f3)	; reinit music
.l71e9
	ld (l77eb),hl
	ld a,(hl)
	dec a
	rlca
	ld hl,(l77f1)
	ld e,a
	ld d,#00
	add hl,de
	ld e,(hl)
	inc hl
	ld d,(hl)
	ld hl,(l77f1)
	add hl,de
	ld a,(hl)
	ld (l77ee),a
	inc hl
	ld (l77e9),hl
	ret


.l77e0
	db #11,#02,#00,#7b,#01,#00,#00,#0d
	db #00

.l77e9
	dw #0d84

.l77eb
	dw l0ce2

.l77ed
	db #01

.l77ee
	db #19

.l77ef
	dw l1360

.l77f1
	dw l0d65

.l77f3
	dw l0ce2

.l78f8
	ds #20,#00

.l7825
	db #08
.l7828
	db #00


.l0b99
	db #08,#02,#01,#0f,#01,#0a,#ff,#04
	db #08,#02,#01,#0f,#01,#0a,#ff,#03
	db #08,#02,#01,#0f,#01,#0a,#ff,#04
	db #0b,#03,#01,#0f,#01,#01,#00,#02
	db #0f,#ff,#05,#ff
.l0bbd
	db #03,#00,#00,#0b,#03,#01,#0e,#01
	db #01,#00,#02,#0e,#ff,#02,#08,#02
	db #01,#0f,#01,#0a,#ff,#03,#ff
.l0bd4
	db #03,#00,#00,#0b,#03,#01,#0d,#01
	db #01,#00,#02,#0c,#ff,#03,#0b,#03
	db #01,#0f,#01,#01,#00,#02,#0f,#ff
	db #05,#08,#02,#01,#0c,#01,#0a,#ff
	db #01,#ff
	;l0bf6
	db #1b,#20,#23,#29,#24,#27,#14,#15
	db #26,#1b,#1c,#14,#24,#20,#23,#29
	db #1a,#14,#17,#26,#29,#22,#17,#1c
	db #14,#28,#1d,#21,#19,#14,#14,#01
	db #00,#14,#05,#00,#01,#00,#00,#05
	db #00,#00,#20,#15,#27,#19,#26,#14
	db #1a,#1d,#26,#19,#14,#14,#14,#14
	db #14,#14,#17,#15,#18,#19,#15,#29
	db #14,#14,#14,#14,#14,#14,#14,#14
	db #14,#14,#1d,#22,#2a,#1d,#22,#17
	db #1d,#16,#1d,#20,#1d,#28,#19,#14
	db #14,#14,#28,#29,#26,#16,#23,#14
	db #14,#14,#14,#14,#14,#14,#14,#14
	db #14,#14,#16,#19,#16,#19,#14,#27
	db #1f,#2b,#19,#19,#1f,#14,#14,#14
	db #14,#14,#1a,#26,#19,#19,#2e,#19
	db #14,#14,#14,#14,#14,#14,#14,#14
	db #14,#14,#17,#1c,#15,#29,#27,#27
	db #29,#26,#19,#14,#14,#14,#14,#14
	db #14,#14,#1c,#15,#21,#16,#29,#26
	db #1b,#19,#26,#14,#14,#14,#14,#14
	db #14,#14,#22,#23,#29,#22,#23,#29
	db #26,#27,#14,#14,#14,#14,#14,#14
	db #14,#14,#1b,#20,#15,#17,#19,#14
	db #14,#14,#14,#14,#14,#14,#14,#14
	db #14,#14,#27,#15,#16,#20,#1d,#19
	db #26,#14,#14,#14,#14,#14,#14,#14
	db #14,#14,#19,#2c,#1d,#28,#14,#14
	db #14,#14,#14,#14,#14,#14,#14,#14
	db #14,#14
.l0ce0
	db #01,#00
.l0ce2
	db #01,#02,#03,#03,#01,#04,#03,#05
	db #06,#07,#03,#08,#01,#09,#0a,#0b
	db #0c,#0d,#03,#0e,#00
.l0cf7
	db #01,#02,#01,#03,#04,#05,#04,#06
	db #07,#08,#09,#07,#0a,#09,#0b,#0c
	db #0b,#0d,#00
.l0d0a
	db #1c,#00,#00,#00,#00,#00,#00,#00
	db #00,#00,#00,#00,#00,#00,#00,#00
	db #00,#00,#00,#00,#00,#00,#00,#00
	db #00,#00,#00,#00,#1f,#19,#6b,#36
	db #93,#11,#66,#14,#6f,#11,#69,#14
	db #6f,#19,#68,#36,#91,#11,#64,#14
	db #f0,#11,#67,#14,#f0,#19,#66,#36
	db #90,#11,#64,#14,#f0,#11,#63,#14
	db #f0,#19,#64,#36,#8f,#11,#66,#11
	db #63,#29,#5f,#36,#8e,#21,#63,#22
	db #93,#21,#66,#12,#8e,#6d,#6b,#6e
	db #87,#6c,#e3
.l0d65
	db #1c,#00,#51,#00,#8a,#00,#bf,#00
	db #fe,#00,#3b,#01,#70,#01,#ad,#01
	db #ea,#01,#2b,#02,#60,#02,#a1,#02
	db #d8,#02,#13,#03,#1a,#19,#57,#16
	db #a7,#19,#57,#16,#a7,#19,#57,#26
	db #a3,#11,#4b,#19,#4b,#16,#a7,#11
	db #57,#19,#57,#16,#a3,#19,#4b,#26
	db #a8,#11,#57,#19,#57,#26,#a8,#11
	db #57,#19,#57,#16,#a5,#19,#4b,#26
	db #a7,#11,#4b,#19,#57,#26,#a3,#11
	db #57,#1c,#19,#57,#16,#a7,#19,#57
	db #16,#a7,#19,#57,#26,#a3,#11,#4b
	db #19,#4b,#16,#a7,#11,#57,#19,#57
	db #16,#a3,#19,#4b,#26,#a8,#11,#57
	db #19,#57,#26,#a8,#11,#57,#19,#57
	db #16,#a5,#19,#4b,#16,#a7,#19,#4b
	db #16,#b6,#19,#57,#16,#b4,#19,#57
	db #16,#b6,#1a,#19,#52,#16,#a2,#19
	db #52,#16,#a2,#19,#52,#26,#9e,#11
	db #46,#19,#46,#16,#a2,#11,#52,#19
	db #52,#16,#9e,#19,#46,#26,#a3,#11
	db #52,#19,#52,#26,#a3,#11,#52,#19
	db #52,#16,#a0,#19,#46,#26,#a2,#11
	db #46,#19,#52,#26,#9e,#11,#52,#1f
	db #19,#57,#16,#aa,#19,#57,#16,#aa
	db #19,#57,#16,#a7,#19,#4b,#16,#aa
	db #19,#4b,#16,#aa,#19,#57,#16,#a7
	db #19,#57,#16,#aa,#19,#4b,#26,#ac
	db #11,#57,#19,#57,#16,#ac,#19,#57
	db #16,#a8,#19,#57,#16,#aa,#19,#4b
	db #16,#aa,#19,#4b,#16,#af,#19,#57
	db #16,#ae,#19,#57,#16,#af,#1e,#19
	db #52,#16,#a5,#19,#52,#16,#a2,#19
	db #52,#16,#a3,#19,#46,#16,#aa,#19
	db #46,#16,#a0,#19,#52,#16,#a2,#19
	db #52,#16,#9e,#19,#46,#26,#a3,#11
	db #52,#19,#52,#16,#a2,#19,#52,#16
	db #9e,#19,#52,#16,#9c,#19,#46,#26
	db #a3,#11,#46,#19,#52,#16,#a2,#19
	db #52,#16,#9e,#1a,#19,#50,#16,#a0
	db #19,#50,#16,#a0,#19,#50,#26,#9c
	db #11,#44,#19,#44,#16,#a0,#11,#50
	db #19,#50,#16,#9c,#19,#44,#26,#a1
	db #11,#50,#19,#50,#26,#a1,#11,#50
	db #19,#50,#16,#9e,#19,#44,#26,#a0
	db #11,#44,#19,#50,#26,#9c,#11,#50
	db #1e,#11,#50,#19,#50,#26,#a8,#11
	db #50,#19,#44,#16,#a8,#19,#44,#16
	db #a7,#19,#50,#16,#a8,#19,#50,#16
	db #a8,#19,#44,#16,#a8,#19,#50,#16
	db #a5,#19,#50,#16,#a8,#19,#50,#16
	db #a8,#19,#50,#16,#a8,#19,#44,#16
	db #a3,#19,#44,#16,#a1,#19,#50,#16
	db #a0,#19,#50,#16,#9c,#1e,#19,#52
	db #16,#b1,#19,#52,#16,#ae,#19,#52
	db #16,#af,#19,#46,#16,#b6,#19,#46
	db #16,#ac,#19,#52,#16,#ae,#19,#52
	db #16,#aa,#19,#46,#26,#af,#11,#52
	db #19,#52,#16,#ae,#19,#52,#16,#aa
	db #19,#52,#16,#a8,#19,#46,#26,#af
	db #11,#46,#19,#52,#16,#ae,#19,#52
	db #16,#aa,#20,#19,#57,#16,#9c,#19
	db #57,#16,#9e,#19,#57,#16,#a3,#19
	db #4b,#16,#9e,#19,#4b,#16,#9b,#19
	db #57,#16,#9e,#19,#57,#16,#a3,#19
	db #4b,#16,#9e,#19,#57,#16,#9c,#19
	db #57,#16,#9e,#19,#57,#16,#a3,#19
	db #57,#16,#a7,#19,#4b,#16,#a5,#19
	db #4b,#16,#a3,#19,#57,#16,#a0,#19
	db #57,#16,#a3,#1a,#19,#5c,#16,#ac
	db #19,#5c,#16,#ac,#19,#5c,#26,#a8
	db #11,#50,#19,#50,#16,#ac,#11,#5c
	db #19,#5c,#16,#a8,#19,#50,#26,#ad
	db #11,#5c,#19,#5c,#26,#ad,#11,#5c
	db #19,#5c,#16,#aa,#19,#50,#26,#ac
	db #11,#50,#19,#5c,#26,#a8,#11,#5c
	db #20,#19,#5c,#16,#a6,#19,#5c,#16
	db #a8,#19,#5c,#16,#ad,#19,#50,#16
	db #a8,#19,#50,#16,#a5,#19,#5c,#16
	db #a8,#19,#5c,#16,#ad,#19,#50,#16
	db #a8,#19,#5c,#16,#a6,#19,#5c,#16
	db #a8,#19,#5c,#16,#ad,#19,#5c,#16
	db #ac,#19,#50,#16,#ad,#19,#50,#16
	db #ad,#19,#5c,#16,#ac,#19,#5c,#16
	db #a8,#1b,#19,#57,#16,#a7,#19,#57
	db #16,#a8,#19,#57,#26,#aa,#11,#4b
	db #19,#4b,#26,#aa,#11,#57,#19,#57
	db #16,#a7,#19,#4b,#26,#aa,#11,#57
	db #19,#57,#26,#aa,#11,#57,#19,#57
	db #16,#aa,#19,#4b,#16,#a7,#19,#4b
	db #16,#a5,#19,#57,#26,#a3,#11,#57
	db #1d,#19,#57,#16,#a7,#19,#57,#16
	db #a7,#19,#57,#16,#a7,#19,#4b,#26
	db #aa,#11,#4b,#19,#57,#16,#aa,#19
	db #57,#16,#aa,#19,#4b,#26,#af,#11
	db #57,#19,#57,#26,#b3,#11,#57,#19
	db #57,#16,#b3,#19,#4b,#16,#b1,#19
	db #4b,#16,#af,#19,#57,#16,#aa,#19
	db #57,#16,#af,#1e,#19,#52,#16,#aa
	db #19,#52,#16,#a7,#19,#52,#16,#a8
	db #19,#46,#16,#aa,#19,#46,#16,#a8
	db #19,#52,#16,#a5,#19,#52,#16,#a8
	db #19,#46,#16,#a7,#19,#52,#16,#9e
	db #19,#52,#26,#a3,#11,#52,#19,#52
	db #26,#99,#11,#46,#19,#46,#16,#9e
	db #19,#52,#16,#a0,#19,#52,#16,#a2
.l10b5
	db #1a,#00,#63,#00,#82,#00,#a5,#00
	db #d6,#00,#0d,#01,#52,#01,#6f,#01
	db #88,#01,#cd,#01,#ee,#01,#51,#02
	db #76,#02,#24,#59,#df,#26,#93,#32
	db #87,#19,#66,#16,#87,#29,#64,#26
	db #0e,#19,#63,#16,#0e,#29,#61,#26
	db #87,#19,#5f,#16,#0e,#39,#5e,#26
	db #95,#32,#8e,#12,#8e,#31,#61,#69
	db #da,#26,#92,#12,#8e,#22,#93,#12
	db #8e,#59,#da,#26,#95,#32,#8e,#19
	db #66,#16,#0e,#29,#64,#26,#95,#19
	db #63,#16,#0e,#29,#61,#26,#92,#19
	db #5e,#16,#0e,#0f,#29,#5f,#26,#93
	db #19,#63,#36,#87,#21,#66,#19,#63
	db #16,#07,#29,#5f,#26,#8e,#19,#63
	db #16,#0e,#29,#66,#26,#93,#19,#63
	db #16,#0e,#11,#29,#5f,#26,#93,#19
	db #63,#36,#87,#21,#66,#19,#63,#16
	db #07,#19,#5f,#26,#8e,#11,#66,#19
	db #63,#16,#0e,#19,#5f,#26,#87,#11
	db #61,#19,#63,#16,#8e,#18,#59,#e4
	db #26,#98,#32,#13,#19,#68,#16,#18
	db #29,#6b,#26,#93,#19,#6b,#16,#13
	db #29,#6a,#26,#98,#19,#68,#16,#13
	db #39,#66,#26,#9f,#32,#87,#31,#6b
	db #12,#1f,#39,#63,#26,#9a,#12,#1a
	db #39,#66,#26,#9f,#12,#13,#1b,#59
	db #e1,#26,#8e,#32,#8e,#19,#63,#16
	db #0e,#19,#64,#26,#89,#11,#66,#19
	db #64,#16,#09,#29,#63,#26,#8e,#19
	db #61,#16,#0e,#39,#63,#26,#87,#12
	db #07,#39,#64,#26,#89,#12,#09,#39
	db #66,#26,#8a,#12,#0a,#29,#63,#26
	db #8b,#19,#5f,#16,#0b,#22,#59,#e1
	db #26,#89,#32,#95,#19,#65,#16,#1c
	db #19,#68,#26,#95,#11,#6d,#19,#6b
	db #16,#15,#29,#6a,#26,#90,#19,#68
	db #16,#15,#19,#66,#26,#8e,#11,#68
	db #19,#66,#16,#0e,#19,#64,#26,#8c
	db #11,#66,#19,#64,#16,#0c,#19,#63
	db #26,#8b,#11,#64,#19,#63,#16,#0b
	db #19,#61,#26,#89,#11,#63,#19,#61
	db #16,#09,#0e,#39,#63,#26,#93,#32
	db #93,#21,#5f,#19,#5a,#16,#13,#29
	db #57,#26,#8e,#19,#5a,#16,#0e,#29
	db #5f,#26,#90,#19,#63,#16,#0e,#0c
	db #29,#64,#26,#95,#19,#63,#36,#15
	db #21,#61,#19,#5f,#16,#15,#69,#de
	db #26,#8e,#12,#0e,#22,#92,#12,#0e
	db #22,#29,#5a,#26,#95,#19,#5c,#36
	db #15,#21,#5e,#19,#5f,#16,#15,#29
	db #61,#26,#8e,#19,#63,#16,#0e,#29
	db #64,#26,#92,#19,#61,#16,#0e,#19
	db #66,#26,#93,#11,#64,#19,#63,#36
	db #93,#11,#64,#11,#61,#19,#6b,#16
	db #13,#19,#66,#26,#8e,#11,#63,#19
	db #66,#16,#0e,#19,#64,#26,#90,#11
	db #63,#19,#5f,#16,#12,#10,#19,#64
	db #26,#95,#11,#66,#19,#64,#36,#15
	db #11,#63,#11,#64,#19,#63,#16,#15
	db #69,#e1,#16,#0e,#12,#12,#12,#0e
	db #12,#0c,#12,#13,#12,#0b,#31,#39
	db #68,#26,#90,#32,#90,#21,#64,#19
	db #66,#16,#10,#29,#68,#26,#8c,#19
	db #6a,#16,#0c,#29,#6b,#26,#90,#19
	db #68,#16,#0c,#29,#66,#26,#93,#19
	db #6b,#36,#93,#21,#6f,#19,#6b,#16
	db #13,#19,#66,#26,#8e,#11,#72,#19
	db #70,#16,#0e,#19,#6f,#36,#93,#11
	db #77,#11,#72,#19,#61,#26,#8e,#11
	db #5a,#19,#66,#36,#8e,#11,#64,#11
	db #63,#19,#61,#16,#0e,#19,#66,#26
	db #89,#11,#64,#19,#63,#16,#09,#19
	db #64,#26,#8e,#11,#63,#19,#61,#16
	db #0e,#12,#29,#5f,#26,#87,#19,#63
	db #16,#07,#29,#66,#26,#89,#19,#63
	db #16,#09,#19,#5f,#26,#8b,#11,#66
	db #19,#64,#16,#0b,#19,#63,#26,#8c
	db #11,#64,#19,#66,#16,#0d,#12,#29
	db #5f,#26,#87,#19,#63,#16,#07,#29
	db #66,#26,#89,#19,#6b,#16,#09,#19
	db #5f,#26,#8b,#11,#66,#19,#64,#16
	db #0b,#19,#63,#26,#8c,#11,#6b,#19
	db #61,#16,#0e

	ds &7150-$,0	; realign data after !

.l1350
	db #00,#0e,#1c,#2a,#38,#46,#54,#62
	db #70,#7e,#8c,#9a,#a8,#b6,#c4,#d2

.l1360
	db #00,#0d,#1a,#27,#34,#41,#4e,#5b
	db #68,#75,#82,#8f,#9c,#a9,#b6,#c3

.l1370
	db #00,#0c,#18,#24,#30,#3c,#48,#54
	db #60,#6c,#78,#84,#90,#9c,#a8,#b4

.l1380
	dw #0598,#0547,#04fc,#04b4
	dw #0470,#0431,#03f4,#03bc
	dw #0386,#0353,#0324,#02f6
	dw #02cc,#02a4,#027e,#025a
	dw #0238,#0218,#01fa,#01de
	dw #01c3,#01aa,#0192,#017b
	dw #0166,#0152,#013f,#012d
	dw #011c,#010c,#00fd,#00ef
	dw #00e1,#00d5,#00c9,#00be
	dw #00b3,#00a9,#009f,#0096
	dw #008e,#0086,#007f,#0077
	dw #0071,#006a,#0064,#005f
	dw #0059,#0054,#0050,#004b
	dw #0047,#0043,#003f,#003c
	dw #0038,#0035,#0032,#002f
	dw #002d,#002a,#0028,#0026
;
; #66c8
; ld a,(#7b10)
; bit 3,a
; ret nz
; jp #6fbb	; play ?
;
; #7b10
; db #20
;
; #9a68
; ld a,(#7b51)
; cp #00
; ret nz
; ld de,#7ac4
; call #70fe
; ld a,(#7b10)	; init ?
; push af
; bit 3,a
; jr nz,l9a8e
; ld hl,#7825
; set 4,(hl)
; call #6768	; init music
; .l9a84
; call #6fbb
; ld a,(#77ee)
; cp #1f
; jr nz,l9a84
; .l9a8e
; pop af
; ld (#7b10),a
; call #9a96
; ret
;
.music_info
	db "Skweek (1989)(Loriciels)(Michel Winogradoff)",0
	db "",0

	read "music_end.asm"
