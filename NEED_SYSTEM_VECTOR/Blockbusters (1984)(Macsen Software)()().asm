; Music of Blockbusters (1984)(Macsen Software)()()
; Ripped by Megachur the 01/06/2019
; $VER 1.5

IFDEF FILENAME_WRITE
	write "BLOCKBUS.BIN"
ENDIF

MUSIC_DATE_RIP_DAY		equ 01
MUSIC_DATE_RIP_MONTH	equ 06
MUSIC_DATE_RIP_YEAR		equ 2019
music_adr				equ #828b
NEED_SYSTEM_VECTOR		equ 1

	read "music_header.asm"

	db #50,#00,#be,#00,#00
;
.play_music
.l8290
;
	ld a,#0c
	ld (l84ec),a
	ld a,#01
	ld (l84e7),a
	call #bcad
	and #07
	ret z
	ld hl,(l82e9)
	ld a,(hl)
	cp #ff
	jr nz,l82af
;
.init_music
;
	ld hl,l82eb	; reset music
	ld (l82e9),hl
	ret
.l82af
	call #bcad
	and #07
	ret z
	ld hl,(l82e9)
	ld a,(hl)
	inc hl
	ld c,(hl)
	inc hl
	ld b,(hl)
	inc hl
	ld (l84e9),bc
	push af
	ld a,b
	or c
	jr nz,l82ce
	xor a
	ld (l84e7),a
	ld (l84ec),a
.l82ce
	pop af
	ld c,(hl)
	inc hl
	ld (l82e9),hl
	ld hl,l84e6
	ld (hl),a
	ld a,c
	ld (l84ed),a
	ld a,(l84e9)
	or a
	jr nz,l82e5
	ld (l84ec),a
.l82e5
	call #bcaa
	ret
.l82eb equ $ + 2
.l82e9
	db #eb,#82,#01,#00,#00,#00,#02,#00
	db #00,#00,#04,#00,#00,#00,#01,#5f
	db #00,#10,#02,#78,#00,#30,#04,#8e
	db #00,#30,#01,#5f,#00,#10,#01,#6b
	db #00,#10,#01,#5f,#00,#30,#02,#78
	db #00,#50,#04,#8e,#00,#50,#01,#6b
	db #00,#20,#01,#5f,#00,#20,#02,#78
	db #00,#30,#04,#8e,#00,#20,#01,#5a
	db #00,#10,#04,#b4,#00,#10,#01,#6b
	db #00,#50,#02,#7f,#00,#10,#04,#a0
	db #00,#10,#02,#00,#00,#40,#04,#00
	db #00,#40,#01,#6b,#00,#10,#02,#00
	db #00,#80,#04,#be,#00,#30,#01,#6b
	db #00,#10,#01,#78,#00,#10,#01,#6b
	db #00,#30,#04,#be,#00,#50,#01,#78
	db #00,#20,#01,#6b,#00,#20,#02,#00
	db #00,#80,#04,#be,#00,#30,#01,#50
	db #00,#10,#01,#5a,#00,#20,#04,#8e
	db #00,#50,#01,#5f,#00,#10,#01,#6b
	db #00,#10,#01,#78,#00,#10,#01,#78
	db #00,#10,#02,#00,#00,#80,#04,#b3
	db #00,#30,#01,#78,#00,#10,#01,#7f
	db #00,#10,#01,#78,#00,#30,#04,#b3
	db #00,#50,#01,#7f,#00,#20,#01,#78
	db #00,#20,#02,#00,#00,#80,#04,#d5
	db #00,#30,#01,#6b,#00,#10,#01,#7f
	db #00,#30,#04,#d5,#00,#50,#01,#8e
	db #00,#20,#01,#7f,#00,#80,#02,#00
	db #00,#80,#04,#be,#00,#50,#04,#be
	db #00,#10,#04,#be,#00,#10,#04,#be
	db #00,#10,#01,#5f,#00,#10,#02,#a0
	db #00,#30,#04,#ef,#00,#30,#01,#5f
	db #00,#10,#01,#6b,#00,#10,#01,#5f
	db #00,#30,#02,#a0,#00,#50,#04,#ef
	db #00,#50,#01,#6b,#00,#20,#01,#5f
	db #00,#20,#02,#00,#00,#30,#04,#ef
	db #00,#30,#01,#5a,#00,#10,#01,#6b
	db #00,#50,#02,#7f,#00,#20,#04,#a0
	db #00,#20,#02,#00,#00,#30,#04,#d5
	db #00,#10,#04,#d5,#00,#10,#04,#d5
	db #00,#10,#01,#6b,#00,#10,#02,#b3
	db #00,#30,#04,#0c,#01,#30,#01,#6b
	db #00,#10,#01,#78,#00,#10,#01,#6b
	db #00,#30,#02,#b3,#00,#50,#04,#0c
	db #01,#50,#01,#78,#00,#20,#01,#6b
	db #00,#20,#02,#b3,#00,#30,#04,#0c
	db #01,#30,#01,#5f,#00,#10,#01,#78
	db #00,#50,#02,#8e,#00,#50,#04,#b3
	db #00,#50,#01,#8e,#00,#40,#02,#b3
	db #00,#40,#04,#d5,#00,#60,#01,#78
	db #00,#20,#02,#00,#00,#40,#04,#d5
	db #00,#20,#01,#5a,#00,#20,#01,#5f
	db #00,#40,#02,#a0,#00,#80,#04,#be
	db #00,#60,#01,#78,#00,#20,#01,#a0
	db #00,#20,#04,#be,#00,#20,#01,#8e
	db #00,#40,#02,#8e,#00,#80,#04,#b3
	db #00,#60,#01,#78,#00,#20,#01,#5a
	db #00,#20,#04,#b3,#00,#20,#01,#6b
	db #00,#40,#02,#7f,#00,#40,#04,#a0
	db #00,#40,#01,#78,#00,#20,#02,#00
	db #00,#40,#04,#a0,#00,#20,#01,#7f
	db #00,#20,#04,#a0,#00,#20,#01,#78
	db #00,#80,#02,#ef,#00,#80,#04,#00
.l84e7 equ $ + 6
.l84e6 equ $ + 5
	db #00,#80,#ff,#ff,#ff,#01,#00,#00
.l84e9
	db #5f,#00,#00,#0c,#73,#00
;
.music_info
	db "Blockbusters (1984)(Macsen Software)()",0
	db "",0

	read "music_end.asm"
